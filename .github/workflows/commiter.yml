name: Commit random shit
on:
  schedule:
    # every day at 6:00 UTC (9:00 MSK)
    - cron:  '0 6 * * *'
  workflow_dispatch:

jobs:
  Run:
    name: 'Run'
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Node
        uses: actions/setup-node@v2
        with:
          node-version: '16.13'

      - name: Create cringe
        run: echo 'Autogenerated file at' $(date) > cron-gen/$(date +%s)-gen.txt

#      - name: Commit changes
#        uses: EndBug/add-and-commit@v9
#        env:
#          ACCESS_TOKEN: '${{ secrets.ACCESS_TOKEN }}'
#        with:
#          author_name: Nikita Elfimov
#          author_email: me@tfk.name
#          message: 'chore(common): generated'
#          new_branch: 'feat/commit-code'

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v4
        env:
          ACCESS_TOKEN: '${{ secrets.ACCESS_TOKEN }}'
        with:
          token: ACCESS_TOKEN
          author: Nikita Elfimov <me@tfk.name>
          committer: Nikita Elfimov <me@tfk.name>
          commit-message: 'chore(common): generated'
          base: master
          branch: feat/commit-code
          delete-branch: true
          assignees: TFK70
          draft: false
          title: 'Timestamp feature'
          body: '## Timestamped'
          branch-suffix: random
